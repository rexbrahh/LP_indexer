---
title: "ingestor/helius/config.go"
---

This page is an **annotated source reference**. Code blocks are imported from the repository at build time.

## What this file is

`ingestor/helius/config.go` defines the runtime configuration for the Helius
ingestor components (LaserStream gRPC + WebSocket endpoints).

It provides:

- default values for timeouts/backoff/replay
- canonical environment variable names (`HELIUS_*`)
- validation so misconfiguration fails fast

## Why this file exists

Helius is used as a secondary ingest source (or as a fallback) and requires
several environment-specific values (endpoints + API key).

Centralizing config in one file:

- keeps CLI/service wiring simple
- ensures reconnection behavior is consistent
- makes it easy to reason about replay windows across providers

## Full source

```go title="ingestor/helius/config.go" file=<rootDir>/ingestor/helius/config.go showLineNumbers
```

## Walkthrough (by declaration)

### package helius

```go title="package helius" file=<rootDir>/ingestor/helius/config.go#L1-L1 showLineNumbers
```

**What:** Declares the `helius` ingestion package.

**How:** This package provides clients that connect to Helius endpoints and emit canonical updates for the rest of the pipeline.

**Why:** Keeping Helius-specific transport logic isolated makes failover and future provider additions straightforward.

### imports

```go title="imports" file=<rootDir>/ingestor/helius/config.go#L3-L9 showLineNumbers
```

**What:** Dependencies for env parsing, numeric conversion, and duration handling.

**How:** Uses `os.Getenv` for configuration, `strconv.Atoi` for numeric env vars, and `time.Duration` for timeouts/backoffs.

**Why:** Keeping config parsing stdlib-only keeps this package light and reusable.

### const (defaultBackoff, defaultReplayWindow, defaultTimeout, envHeliusAPIKey, envHeliusBackoffMS, envHeliusGRPC, envHeliusReplaySlots, envHeliusTimeoutMS, envHeliusWS)

**Symbols:** defaultBackoff, defaultReplayWindow, defaultTimeout, envHeliusAPIKey, envHeliusBackoffMS, envHeliusGRPC, envHeliusReplaySlots, envHeliusTimeoutMS, envHeliusWS

```go title="const (defaultBackoff, defaultReplayWindow, defaultTimeout, envHeliusAPIKey, envHeliusBackoffMS, envHeliusGRPC, envHeliusReplaySlots, envHeliusTimeoutMS, envHeliusWS)" file=<rootDir>/ingestor/helius/config.go#L11-L21 showLineNumbers
```

**What:** Default values and canonical environment variable names for Helius configuration.

**How:** Defaults are used by `DefaultConfig()`; env var constants are used by `FromEnv()` to load endpoint/API key and optional timing knobs.

**Why:** Env vars are the operational interface. Centralizing names prevents drift and makes runbooks reliable.

### type (Config)

**Symbols:** Config

```go title="type (Config)" file=<rootDir>/ingestor/helius/config.go#L23-L34 showLineNumbers
```

**What:** `Config` holds all runtime parameters needed to connect and reconnect to Helius.

**How:** It includes:

- endpoints (`GRPCEndpoint`, `WSEndpoint`) + `APIKey`
- reconnect policy (`RequestTimeout`, `ReconnectBackoff`, `ReplaySlots`)
- `ProgramFilters` (friendly name â†’ program ID), typically sourced from the same config used for Geyser

**Why:** The ingest client needs both connectivity info and retry/replay policy to be resilient under provider/network instability.

### func DefaultConfig

**Symbols:** DefaultConfig

```go title="func DefaultConfig" file=<rootDir>/ingestor/helius/config.go#L36-L44 showLineNumbers
```

**What:** Returns a config struct with sensible defaults for optional fields.

**How:** Populates timeout/backoff/replay values while leaving endpoints and API key empty.

**Why:** Defaults provide predictable behavior in dev/prod while still requiring environment-specific connection values to be configured explicitly.

### func (*Config) Validate

**Symbols:** Validate

```go title="func (*Config) Validate" file=<rootDir>/ingestor/helius/config.go#L46-L77 showLineNumbers
```

**What:** Validates required fields and checks duration bounds.

**How:** Ensures:

- config is non-nil
- endpoints and API key are set
- request timeout/backoff are positive
- replay slots is >= 1

**Why:** Long-running ingestors should fail fast on missing endpoints/keys rather than starting a stream that will immediately error.

### func FromEnv

**Symbols:** FromEnv

```go title="func FromEnv" file=<rootDir>/ingestor/helius/config.go#L79-L112 showLineNumbers
```

**What:** Builds a validated `Config` from environment variables.

**How:** The function:

1. Starts from `DefaultConfig()`.
2. Reads required fields from:
   - `HELIUS_GRPC`, `HELIUS_WS`, `HELIUS_API_KEY`
3. Applies optional overrides for:
   - request timeout (`HELIUS_TIMEOUT_MS`)
   - reconnect backoff (`HELIUS_BACKOFF_MS`)
   - replay window (`HELIUS_REPLAY_SLOTS`)
4. Validates and returns the config.

**Why:** This is the canonical configuration surface for running the Helius ingestor components in different environments.
